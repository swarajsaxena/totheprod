#!/bin/sh

echo "âš™ï¸  Generating component props..."
cd apps/ui && bun run extract:props:all > /dev/null 2>&1
if [ $? -ne 0 ]; then
  echo "âŒ Props generation failed. Please check the components and try again."
  exit 1
fi

echo "ğŸ“¦ Staging generated props files..."
git add content/props/*.json
git add public/content/props/*.json

echo "ğŸ“¦ Generating registry..."
bun run generate:all > /dev/null 2>&1
if [ $? -ne 0 ]; then
  echo "âŒ Registry generation failed. Please check the components and try again."
  cd ../..
  exit 1
fi

echo "ğŸ“¦ Staging generated registry files..."
git add public/r/*.json

cd ../..

echo "âœ… Props and registry generated and staged!"
