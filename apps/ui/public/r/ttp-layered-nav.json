{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ttp-layered-nav",
  "type": "registry:block",
  "title": "Layered Nav",
  "description": "Multi-depth navigation with stacked drawer animations",
  "dependencies": [
    "motion",
    "vaul",
    "next"
  ],
  "files": [
    {
      "path": "components/ui/totheprod-ui/ttp-layered-nav.tsx",
      "content": "\"use client\"\n\nimport { AnimatePresence, motion } from \"motion/react\"\nimport Link from \"next/link\"\nimport { type Dispatch, type SetStateAction, useEffect, useState } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { TtpWavyText } from \"./ttp-wavy-text\"\n\nexport type MenuItem = {\n  color: string\n  text: string\n  href?: string\n}\n\ntype LayeredNavProps = {\n  /** Array of menu items with color and text */\n  menuItems?: MenuItem[]\n  /** Background color of the menu overlay */\n  backgroundColor?: string\n  /** Text color for header and trigger */\n  textColor?: string\n  /** Brand text displayed in the header */\n  brandText?: string\n  /** Whether the menu starts open */\n  defaultOpen?: boolean\n  /** Callback fired when menu open state changes */\n  onOpenChange?: (isOpen: boolean) => void\n  /** Custom class name for the container */\n  containerClassName?: string\n  /** Text for the open trigger button */\n  openTriggerText?: string\n  /** Text for the close trigger button */\n  closeTriggerText?: string\n  /** Whether to show the brand header */\n  showBrandHeader?: boolean\n  /** Custom class name for the menu items */\n  itemClassName?: string\n}\n\nexport const LayeredNav = ({\n  menuItems = [\n    { color: \"#8E9067\", text: \"Home\", href: \"#\" },\n    { color: \"#BE5B2A\", text: \"About\", href: \"#\" },\n    { color: \"#828D94\", text: \"Contact\", href: \"#\" },\n    { color: \"#D69A3F\", text: \"Services\", href: \"#\" },\n    { color: \"#B6A897\", text: \"Products\", href: \"#\" },\n  ],\n  backgroundColor = \"#1C1B19\",\n  textColor = \"#B6A897\",\n  brandText = \"Layered Nav\",\n  defaultOpen = false,\n  onOpenChange,\n  containerClassName,\n  openTriggerText = \"Menu\",\n  closeTriggerText = \"Close\",\n  showBrandHeader = true,\n  itemClassName,\n}: LayeredNavProps) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen)\n  const [isMenuItemHover, setisMenuItemHover] = useState<number | null>(null)\n  const [hasAnimated, setHasAnimated] = useState(false)\n\n  useEffect(() => {\n    if (isOpen) {\n      setHasAnimated(false)\n      const timer = setTimeout(() => {\n        setHasAnimated(true)\n      }, 100)\n      return () => clearTimeout(timer)\n    }\n  }, [isOpen])\n\n  useEffect(() => {\n    onOpenChange?.(isOpen)\n  }, [isOpen, onOpenChange])\n\n  const handleSetIsOpen = (value: boolean | ((prev: boolean) => boolean)) => {\n    setIsOpen(value)\n  }\n\n  return (\n    <>\n      <MenuTrigger\n        setIsOpen={handleSetIsOpen}\n        text={openTriggerText}\n        textColor={textColor}\n      />\n      <AnimatePresence mode=\"wait\">\n        {isOpen && (\n          <motion.div\n            animate={{\n              opacity: 1,\n              transition: { duration: 0.3 },\n            }}\n            className={cn(\n              \"absolute top-0 left-0 flex h-full w-full flex-col overflow-hidden\",\n              containerClassName\n            )}\n            exit={{\n              opacity: 0,\n              transition: { duration: 0.3, delay: menuItems.length * 0.1 },\n            }}\n            initial={{ opacity: 0 }}\n            key=\"layered-nav-menu\"\n            style={{ backgroundColor }}\n          >\n            {showBrandHeader && (\n              <div\n                className=\"flex items-center justify-between p-8\"\n                style={{ color: textColor }}\n              >\n                <span className=\"font-bold text-2xl\">{brandText}</span>\n                <MenuTrigger\n                  className=\"relative top-0 right-0\"\n                  setIsOpen={handleSetIsOpen}\n                  text={closeTriggerText}\n                  textColor={textColor}\n                />\n              </div>\n            )}\n            <div className=\"relative flex-1\">\n              {menuItems.map((item, index) => (\n                <Link href={item.href || \"#\"} key={item.text}>\n                  <motion.div\n                    animate={{\n                      top: `${(100 / menuItems.length) * index}%`,\n                      y: (() => {\n                        if (isMenuItemHover === null) {\n                          return 0\n                        }\n                        if (index === isMenuItemHover) {\n                          return -30\n                        }\n                        if (index < isMenuItemHover) {\n                          return -20\n                        }\n                        return 20\n                      })(),\n                      opacity: 1,\n                    }}\n                    className={cn(\n                      \"absolute bottom-0 left-0 h-screen w-full cursor-pointer rounded-t-4xl border p-[1.4vw] text-center font-black font-heading text-[#1C1B19] text-[10vw] shadow-2xl\",\n                      itemClassName\n                    )}\n                    exit={{\n                      top: \"100%\",\n                      opacity: 0,\n                      y: 0,\n                      transition: {\n                        duration: 1,\n                        ease: \"easeIn\",\n                        type: \"spring\",\n                        delay: (menuItems.length - 1 - index) * 0.1,\n                      },\n                    }}\n                    initial={{\n                      top: \"100%\",\n                      opacity: 0,\n                    }}\n                    key={item.text}\n                    onMouseEnter={() => setisMenuItemHover(index)}\n                    onMouseLeave={() => setisMenuItemHover(null)}\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                    transition={{\n                      duration: hasAnimated ? 0.5 : 1,\n                      ease: \"easeIn\",\n                      type: \"spring\",\n                      delay: hasAnimated ? 0 : index * 0.1,\n                    }}\n                  >\n                    <span>{item.text}</span>\n                  </motion.div>\n                </Link>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  )\n}\n\ntype LayeredNavTriggerProps = {\n  setIsOpen: Dispatch<SetStateAction<boolean>>\n  text: string\n  textColor?: string\n  className?: string\n}\n\nconst MenuTrigger = ({\n  setIsOpen,\n  text,\n  textColor = \"#B6A897\",\n  className,\n}: LayeredNavTriggerProps) => {\n  return (\n    <button\n      className={cn(\n        \"flex cursor-pointer items-center gap-1.5 rounded-full border px-2.5 py-1\",\n        className\n      )}\n      onClick={() => setIsOpen((prev) => !prev)}\n      style={{\n        borderColor: textColor,\n        color: textColor,\n      }}\n      type=\"button\"\n    >\n      <TtpWavyText\n        className=\"flex items-center gap-1 text-sm\"\n        text={text}\n        textClassName=\"text-xs\"\n      />\n    </button>\n  )\n}\n",
      "type": "registry:component"
    }
  ],
  "meta": {
    "category": "navigation-and-menus",
    "tags": [
      "navigation",
      "drawer",
      "layered",
      "multi-level"
    ],
    "installCommand": "npx shadcn@latest add https://ui.totheprod.com/r/ttp-layered-nav.json"
  }
}