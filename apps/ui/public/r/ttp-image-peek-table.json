{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ttp-image-peek-table",
  "type": "registry:block",
  "title": "Image Peek Table",
  "description": "A data table with smooth image preview popover that follows cursor on hover, featuring clickable rows and elegant transitions",
  "dependencies": [
    "motion",
    "next"
  ],
  "files": [
    {
      "path": "components/ui/totheprod-ui/ttp-image-peek-table.tsx",
      "content": "\"use client\"\n\nimport { motion } from \"motion/react\"\nimport Image from \"next/image\"\nimport {\n  Children,\n  createContext,\n  type ReactNode,\n  useContext,\n  useMemo,\n  useState,\n} from \"react\"\nimport {\n  Table,\n  TableBody,\n  TableCaption,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\"\nimport { cn } from \"@/lib/utils\"\n\ntype RowIndexContextType = {\n  getNextIndex: () => number\n  reset: () => void\n}\n\nconst RowIndexContext = createContext<RowIndexContextType | null>(null)\n\nconst useRowIndex = () => {\n  const context = useContext(RowIndexContext)\n  if (!context) {\n    return null\n  }\n  return context.getNextIndex()\n}\n\ntype ImageHoverContextType = {\n  setHoveredImageUrl: (url: string | null) => void\n}\n\nconst ImageHoverContext = createContext<ImageHoverContextType | null>(null)\n\nconst useImageHover = () => {\n  const context = useContext(ImageHoverContext)\n  if (!context) {\n    return null\n  }\n  return context\n}\n\ntype LandoNorrisTableProps = {\n  className?: string\n  children: ReactNode\n}\n\ntype LandoNorrisTableHeaderProps = {\n  className?: string\n  children: ReactNode\n}\n\ntype LandoNorrisTableBodyProps = {\n  className?: string\n  children: ReactNode\n}\n\ntype LandoNorrisTableRowProps = {\n  className?: string\n  children: ReactNode\n  onClick?: () => void\n  imageUrl?: string\n}\n\ntype LandoNorrisTableCellProps = {\n  className?: string\n  children: ReactNode\n}\n\ntype LandoNorrisTableHeadProps = {\n  className?: string\n  children: ReactNode\n}\n\ntype LandoNorrisTableFooterProps = {\n  className?: string\n  children: ReactNode\n}\n\ntype LandoNorrisTableCaptionProps = {\n  className?: string\n  children: ReactNode\n}\n\nexport const LandoNorrisTable = ({\n  className,\n  children,\n}: LandoNorrisTableProps) => {\n  const [hoveredImageUrl, setHoveredImageUrl] = useState<string | null>(null)\n  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 })\n\n  const imageHoverContextValue = useMemo<ImageHoverContextType>(\n    () => ({\n      setHoveredImageUrl,\n    }),\n    []\n  )\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    setMousePosition({ x: e.clientX, y: e.clientY })\n  }\n\n  return (\n    <ImageHoverContext.Provider value={imageHoverContextValue}>\n      {/** biome-ignore lint/a11y/noNoninteractiveElementInteractions: Decorative hover effect */}\n      <section\n        aria-label=\"Table with image preview\"\n        className={cn(\"w-full overflow-hidden **:text-left\", className)}\n        onMouseMove={handleMouseMove}\n      >\n        <Table className=\"w-full border-collapse\">{children}</Table>\n        {hoveredImageUrl && (\n          <motion.div\n            animate={{\n              opacity: 1,\n              scale: 1,\n              x: mousePosition.x + 20,\n              y: mousePosition.y - 192,\n            }}\n            className=\"pointer-events-none fixed z-50 aspect-9/16 h-96 overflow-hidden rounded-lg border border-border shadow-2xl\"\n            exit={{ opacity: 0, scale: 0.8 }}\n            initial={{ opacity: 0, scale: 0.8 }}\n            style={{\n              left: 0,\n              top: 0,\n            }}\n            transition={{ duration: 0.2, ease: \"easeOut\" }}\n          >\n            <Image\n              alt=\"Row preview\"\n              className=\"h-full w-full object-cover\"\n              height={256}\n              src={hoveredImageUrl}\n              unoptimized\n              width={384}\n            />\n          </motion.div>\n        )}\n      </section>\n    </ImageHoverContext.Provider>\n  )\n}\n\nexport const LandoNorrisTableHeader = ({\n  className,\n  children,\n}: LandoNorrisTableHeaderProps) => {\n  return (\n    <TableHeader\n      className={cn(\"bg-transparent hover:bg-transparent!\", className)}\n    >\n      {children}\n    </TableHeader>\n  )\n}\n\nexport const LandoNorrisTableBody = ({\n  className,\n  children,\n}: LandoNorrisTableBodyProps) => {\n  const indexRef = useMemo(() => ({ current: 0 }), [])\n\n  const contextValue = useMemo<RowIndexContextType>(\n    () => ({\n      getNextIndex: () => {\n        const current = indexRef.current\n        indexRef.current += 1\n        return current\n      },\n      reset: () => {\n        indexRef.current = 0\n      },\n    }),\n    [indexRef]\n  )\n\n  return (\n    <RowIndexContext.Provider value={contextValue}>\n      <TableBody className={cn(className)}>{children}</TableBody>\n    </RowIndexContext.Provider>\n  )\n}\n\nexport const LandoNorrisTableRow = ({\n  className,\n  children,\n  onClick,\n  imageUrl,\n}: LandoNorrisTableRowProps) => {\n  const [isHovered, setIsHovered] = useState(false)\n  const imageHover = useImageHover()\n  const rowIndex = useRowIndex()\n  const delay = rowIndex !== null ? rowIndex * 0.02 : 0\n  const columnCount = Children.count(children)\n\n  const handleMouseEnter = () => {\n    setIsHovered(true)\n    if (imageUrl && imageHover) {\n      imageHover.setHoveredImageUrl(imageUrl)\n    }\n  }\n\n  const handleMouseLeave = () => {\n    setIsHovered(false)\n    if (imageHover) {\n      imageHover.setHoveredImageUrl(null)\n    }\n  }\n\n  return (\n    <TableRow\n      className={cn(\n        \"relative z-10 border-border/50 border-b transition-colors first:border-t! last:border-b! hover:bg-transparent hover:text-background\",\n        onClick && \"cursor-pointer\",\n        className\n      )}\n      onClick={onClick}\n      onKeyDown={(e) => {\n        if (onClick && (e.key === \"Enter\" || e.key === \" \")) {\n          e.preventDefault()\n          onClick()\n        }\n      }}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      role={onClick ? \"button\" : undefined}\n      tabIndex={onClick ? 0 : undefined}\n    >\n      <TableCell\n        className=\"role-background absolute inset-0 z-50 p-0\"\n        colSpan={columnCount}\n      >\n        <motion.div\n          animate={{ width: 0 }}\n          className=\"absolute right-0 z-100 h-full w-full bg-foreground\"\n          initial={{ width: \"100%\" }}\n          transition={{ duration: 0.3, delay, ease: \"easeInOut\" }}\n        />\n      </TableCell>\n      <TableCell\n        className=\"role-foreground absolute inset-0 z-0 p-0\"\n        colSpan={columnCount}\n      >\n        <motion.div\n          animate={{\n            height: isHovered ? \"100%\" : 0,\n          }}\n          className=\"-translate-y-1/2 absolute top-1/2 right-0 z-0 h-0 w-full bg-foreground\"\n          initial={{ height: \"0\" }}\n          transition={{ duration: 0.3, ease: \"easeInOut\" }}\n        />\n      </TableCell>\n      {children}\n    </TableRow>\n  )\n}\n\nexport const LandoNorrisTableCell = ({\n  className,\n  children,\n}: LandoNorrisTableCellProps) => {\n  return (\n    <TableCell\n      className={cn(\n        \"-tracking-wide relative z-10 p-0 px-1 py-1 text-left font-bold font-heading text-4xl text-inherit\",\n        className\n      )}\n    >\n      {children}\n    </TableCell>\n  )\n}\n\nexport const LandoNorrisTableHead = ({\n  className,\n  children,\n}: LandoNorrisTableHeadProps) => {\n  return (\n    <TableHead\n      className={cn(\n        \"relative z-10 h-[unset] px-1 pt-1! pb-4 font-normal text-[10px] text-inherit uppercase\",\n        className\n      )}\n    >\n      {children}\n    </TableHead>\n  )\n}\n\nexport const LandoNorrisTableFooter = ({\n  className,\n  children,\n}: LandoNorrisTableFooterProps) => {\n  return <TableFooter className={cn(className)}>{children}</TableFooter>\n}\n\nexport const LandoNorrisTableCaption = ({\n  className,\n  children,\n}: LandoNorrisTableCaptionProps) => {\n  return <TableCaption className={cn(className)}>{children}</TableCaption>\n}\n",
      "type": "registry:component"
    }
  ],
  "meta": {
    "category": "data-display",
    "tags": [
      "table",
      "data",
      "hover",
      "interactive",
      "image-preview"
    ],
    "installCommand": "npx shadcn@latest add https://ui.totheprod.com/r/ttp-image-peek-table.json"
  }
}
